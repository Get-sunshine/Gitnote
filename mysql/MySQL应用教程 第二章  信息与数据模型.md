# 第二章 信息与数据模型

数据模型是描述数据及数据之间联系的结构形式，它的主要任务就是组织数据库中的数据。

## 2.1 信息的三种世界 

信息的三种世界：现实世界、信息世界、计算机世界（数据世界）。

### 2.1.1 信息的现实世界

现实世界指存在于人脑之外的客观世界。认识信息的现实世界，并用概念加以描述的过程称为系统分析。信息的现实世界通过<实体+特征+实体集+联系>进行划分和认识。

**实体**：现实世界中存在的可以相互区分的事物或概念称为实体。一个学生、一台设备是事物实体。一门课、一个班级称为概念实体。

**实体的特征**： 每个实体都有自己的特征，利用实体的特征可以区别不同的实体。例如，学生可以通过姓名、性别、年龄等特征来描述自己。尽管每个实体有很多特征，但是只选择其中对管理或处理有用的特征进行研究。

**实体集及实体集之间的联系**： 具有相同的特征或能用同样特征描述的实体集合称为实体集。例如：学生、工人都是实体集。实体集不是独立存在的，它们之间有各种各样的联系。如学生选一门课程，教师教授一门课程。

### 2.1.2 信息的信息世界

当事物用信息来描述时，就进入了信息世界。

实体的特征在头脑中形成的知识称为**属性。**

实体通过其属性表示为**实例**。

同类实例的集合称为对象，对象即实体集中的实体用属性表示得出的信息集合。

**实体不等同于实例**，张三是一个实体，“张三，20岁，计算机科学与技术”是一个实例，现实世界中的张三具有很多的特征，而实例仅仅是采用了需要的特征。

### 2.1.3 信息的计算机世界

信息世界中的信息，经过数字化处理形成计算机能够处理的数据，就进入计算机世界（机器世界、数据世界）。

**数据项**：对象属性的数据表示。

**记录**：记录是实例的数据表示。

**文件**：对象的数据表示，是同类记录的集合。

**数据模型**：记录结构及其记录联系的数据化的结果就是数据模型。

### 2.1.4 三个世界之间的对应关系

三个世界是从客观 到认识、从认识到使用管理的三个不同层次，后一领域是对前一领域的抽象描述。

![img](E:\前端\GitNote\Gitnote\mysql\图片笔记\_CopyPix_2.png)



## 2.2 数据模型

### 2.2.1 数据模型的概念

模型是现实世界特征的模拟和抽象。

数据模型主要用来抽象、表示和处理现实世界中的数据和信息，以便于采用数据库技术对数据进行集中管理和应用，是对客观事物及其联系的数学描述。

数据模型应该满足三方面的要求：一是能够比较真实的模拟现实世界。二是容易为人所理解。三是便于在计算机上实现。

### 2.2.2 数据处理三层抽象描述

数据模型要很好的满足上述三个方面较为困难，在不同的层次采用不同的数据模型，一般分为概念层、逻辑层、物理层。

1. **概念层：**数据抽象级别的最高层，按用户的观点对现实世界建模。

概念层的数据模型称为概念数据模型，简称概念模型。概念模型独立于任何DBMS，但容易向DBMS支持的逻辑模型转换。常用的概念模型：实体--联系模型（Entity---Relationship Model，简称E-R模型。）

2. **逻辑层：**数据抽象的中间层，描述数据库数据整体的逻辑结构。称为逻辑数据模型，简称数据模型。是基于计算机系统观点来对数据进行建模和表示。不同的DBMS提供不同的逻辑数据模型常见数据模型：层次模型、网状模型、关系模型、面向对象模型。
3. **物理层：**数据抽象底层，描述数据物理存储结构和存储方法。这一层的数据抽象称为物理数据模型。与DBMS的设计、操作系统、计算机硬件密切相关。一般向用户屏蔽，不必了解细节。

### 2.2.3 数据模型的要素

### 2.2.4 数据模型与数据模式的区别

**数据模式：**以一定的数据模型对一个单位的数据的类型、结构及其相互间的关系所进行的描述。 数据模式有型和值之分，型是指框架，而值是指框架中的实例。

例子：学生记录的型（姓名、性别、出生年月、籍贯、所在系别），而（李明、男，1978-10，江苏，计算机系）是上述框架的一个值。

数据模型和数据模式的主要区别在于数据模型是描述现实世界数据的手段和工具。数据模式是利用这个手段和工具对相互间的关系进行的描述，是关于型的描述。它与DBMS和OS硬件无关。

![img](E:\前端\GitNote\Gitnote\mysql\图片笔记\_CopyPix_1_2.png)

## 2.3 概念模型

概念模型用于信息世界的建模，是现实世界到信息世界的第一层抽象，是数据库设计人员进行数据库设计的有力工具，也是数据库设计人员和用户之间进行交流的语言。因此，概念模型应具有较强的语义表达能力，且简单、清晰、易于用户理解。

### 2.3.1 基本概念

**从现实抽象过来的信息世界的基本概念**：

1. **实体** 客观存在的实体事物，也可以是抽象的概念或关系，例如：老师、学院、老师和学院之间的工作关系。

2. **属性**  实体具有的某一特性，一个实体可以由若干个属性来描述。例如：学生实体用学号、姓名、性别、出生年月等属性描述。

3. **实体型**  用实体类型名和所有属性来共同表示同一类实体，如：学生（学号、年龄）

4. **实体集**  同一类型实体的集合，如全体学生。

   注意：区分实体、实体型、实体集三个概念：实体是某个具体的个体，如学生王明。实体集是一个个实体的某个集合，如王明所在的2015级计算机2班的所有学生。而实体型是实体的某种类型（该种类型的所有实体具有相同的属性而已。）

5. **码（Key）**  可以唯一标识一个属性的实体集，例：每个学生具有唯一的学号，则学号可以作为码。

6. **域（Domain）** 即实体属性的取值范围（属于某个域），精确的讲，域应该是某种数据类型的值的集合。如，学生的年龄在6~40岁。

7. **联系（RelationShip）** 主要指实体内部的联系（实体属性间的联系）和实体间的联系。

### 2.3.2 E-R模型

概念层数据模型是面向用户、面向现实世界的数据模型，它是对现实世界的真实、全面的反映，它与具体的DBMS无关。常用的如：实体-联系模型。E-R图由实体、属性和联系三个要素构成。

#### **1.基本概念**

##### （1）实体

客观存在并可相互区分的事物称为实体。

E-R图中的实体：现实世界具有相同属性描述的事物的集合，不是某一个具体事物，而是某一种类别所有事物的统称。

E-R图中：矩形框表示具体实体，实体名写在框内。实体中的每个具体的记录值（一行数据），比如学生实体中的每个具体的学生称为一个实体的一个实例。

##### （2）属性

E-R图中：属性用于表示实体的某种特征，也可以使用属性表示实体间联系的特征。一个实体通常包含多个属性，每个属性由属性名唯一标记，画在椭圆内。实体属性对应数据库表字段。

属性是不可再分的最小单元，如果属性可再分，则考虑将其细分，或将其升格为一个实体。

![1605173365776](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605173365776.png)

##### （3）联系

现实世界中，事物内部及事物之间是有联系的，这些联系在信息世界中反映为实体内部的联系和实体之间的联系

实体内部联系：组成实体的各属性之间的联系。

实体之间联系：不同实体集之间的联系。

E-R图：联系用菱形表示，框内写联系名，用连线将联系框与它所关联的实体连接起来。

![1605173409373](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605173409373.png)

基数：一个实体到另一个实体之间关联的数目。基数是针对关系之间的某个方向提出的概念，基数可以是一个取值范围，也可以是某个具体数值。

从基数的角度：关系可分为三类：一对一（1:1），一对多（1：n），多对多（m:n）

联系可分为三类：

**1）一对一联系。**实体集A中的每个实体，在实体集B中至多有一个（也可以没有）实体与之联系，反之亦然。即实体集A和实体集B有一对一联系，记为：1:1。

![1605173957255](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605173957255.png)

![1605173967132](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605173967132.png)

**2）一对多联系**。对于实体集A中的每一个实体，实体集B中有n个实体（n>=0）与之联系，反之，对于实体集B中的每个实体，实体集A中至多只有一个实体与之联系，则称实体集A与实体集B有一对多联系，记为：1:n.

![1605173995918](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605173995918.png)

![1605174013299](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605174013299.png)

**3)多对多联系。**实体集A中的每一个实体，实体集B中有n个实体（n>=0）与之联系，反之，对于实体集B中的每个实体，实体集A中有m个实体（m>=0）与之联系，则称实体集A与实体集B有多对多的联系，记为m:n.

![1605174036056](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605174036056.png)

![1605174052972](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605174052972.png)

#### 2.E-R模型设计原则与设计步骤

##### （1）设计原则

- 属性应该存在于且只存在于某一个地方（实体或关联中）。即避免同一数据存储于多个数据库表，避免数据冗余。
- 实体是单独的个体，不能存在于另一实体中成为其属性。即确保一个数据库表中不能包含另一个数据库表。
- 同一实体在同一E-R图中仅出现一次。

##### （2）设计步骤

1. 划分和确定实体。
2. 划分和确定联系。
3. 确定属性。![1605174237886](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605174237886.png)
4. 画出E-R图。重复1）-3），找出所有实体集、关系集、属性和属值集，然后绘制E-R图。
5. 优化E-R模型。 利用数据流程图，对E-R总图进行优化，消除数据实体间冗余的联系及属性，形成基本的E-R模型。

## 2.4 逻辑模型

目前，数据库领域中最常用的逻辑数据模型有以下几种：

### 2.4.1 层次模型

层次数据模型：最早出现的数据模型，用树形结构表示各类实体，以及实体间的联系。

![1605175016774](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605175016774.png)

### 2.4.2  网状模型

网状模型：去掉了层次模型的两个限制，允许节点有多个双亲节点，允许多个节点没有双亲节点。

![1605175388613](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605175388613.png)

### 2.4.3  关系模型

关系数据模型：目前最重要、应用最广泛的数据模型。 简单的说：关系即一张二维表，由行和列组成。关系模型将数据模型组织成表格的形式，这种表格在数学上称为关系。表中存放数据，在关系模型中实体及实体之间的联系都用关系，即二维表来表示。

![1605175677374](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605175677374.png)

### 2.4.4 面向对象模型

面向对象模型：近些年出现的一种新的数据模型，是用面向对象的观点来描述现实世界中的事物（对象）的逻辑结构和对象间的联系等的数据模型。

对象：对现实世界中的事物的高度抽象，是状态和行为的封装。状态是属性的集合，行为是在该对象上操作方法的集合。

## 2.5 概念模型向逻辑模型转换

本书：E-R模型-----》》关系模型。

### 2.5.1 转换原则

关系数据库就是表的集合。通常，每个表中的数据有且只有一个主题，若一个表中有两个或多个主题，需要将其分解成两个或多个表。具体数据库表的形成就是概念模型向逻辑模式转换过程中，形成多张表的逻辑结构。

关系模型的逻辑结构是一组关系模式的集合。E-R模型由实体、实体的属性及实体间联系组成。故，将E-R模型转换为关系模型实际上就是将实体、实体的属性和实体间联系转换为关系模式。转换的**一般规则：一个实体转换为一个关系模式。**

实体的属性就是关系的属性。

#### 1.）1:1 联系

一个1:1联系可以转换为一个独立的关系模式，也可以与任意一端所对应的的关系模式合并。如果转换为独立的关系模式，则与该联系相连的各实体的码以及联系本身的属性均转换为关系的属性，每个实体的码均是该关系的候选码。如果与某端实体对应的关系模式合并，则需要在该关系模式的属性中加入一个关系模式的码和联系本身的属性。

#### 2）1：n 联系

一个1：n联系可以转换为一个独立的关系模式，也可以与n端对应的关系模式合并。如果转换为一个独立的关系模式，则与该联系相连的各实体的码以及联系本身的属性均转换为关系的属性，而关系的码为n端实体的码。

#### 3）m:n 联系

一个m:n联系可以可以转换为一个独立的关系模式，与该联系相连的各实体的码，以及联系本身的属性均转换为关系的属性，各实体的码组成关系的码或关系码的一部分。

### 2.5.2 转换实例

转换过程遵循以下规则：

#### 规则 1.1  实体类型的转换

每个实体类型转换成一个关系模式，实体的属性即关系的书信，实体的码就是关系模式的码。

#### 规则 1.2 联系类型的转换

不同的联系类型做不同的处理。

##### 1） 联系是1：1。在两个实体类型转换成的两个关系模式中任意一个关系模式中加入另一个关系模式的码和联系类型的属性。

##### 2 ）联系是1：n。在n端实体类型转换成的关系模式中加入1端实体类型的码和联系类型的属性。

##### 3） 联系是m:n。将联系类型也转换成关系模式，属性是两端实体类型的码加上联系类型的属性，码是两端实体码的组合。

##### 4）联系是多元的。3个或3个以上的实体间的一个多元联系，不管联系类型是何种方法，总是将多元联系类型转换成一个关系模式，属性是与该联系相连的各实体的码及联系本身的属性，码是各实体码的组合。

##### 5）具有相同码的关系可以合并。

例子：1：1 

![1605258613680](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605258613680.png)

![1605258654422](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605258654422.png)

例子：1：n

![1605260007856](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260007856.png)

![1605260021537](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260021537.png)

![1605260040494](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260040494.png)

![1605260140511](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260140511.png)

例子：m:n

![1605260323254](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260323254.png)

![1605260530936](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605260530936.png)

## 2.8 概念模型（E-R图）画法与逻辑模型转换实验

### 1.验证性内容

#### 1.实验内容

![1605516158965](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516158965.png)

![1605516255361](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516255361.png)

![1605516346313](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516346313.png)

![1605516594087](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516594087.png)

![1605516611985](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516611985.png)

![1605516794020](E:\前端\GitNote\Gitnote\mysql\图片笔记\1605516794020.png) 

